units:
  # Proxy Keycap Spacing
  kx: cx
  ky: cy
  # Padded Keycap Spacing
  px: cx + 2 # 21 width
  py: cy + 2 # 20 height on flat 2d
points:
  zones:
    main:
      anchor: # to show PCB in KiCad
        shift: [100, 100]
      key:
        padding: ky # vertical
        spread: kx # horizontal
        width: kx # for preview
        height: ky # for preview
      columns:
        outer:
          rows.mod.skip: true
        pinky:
          rows.mod.skip: true
        ring:
          key.stagger: 4.9
        middle:
          key.stagger: 2.5
        index:
          key.stagger: -2.5
        inner:
          key.stagger: -2.5
          rows.mod.skip: true
      rows:
        mod:
        bottom:
        home:
        top:
        num:
    thumbs:
      key:
        padding: ky
        spread: kx
        width: kx
        height: ky
      anchor:
        ref: main_inner_mod
        shift: [2.5, -2.5]
      columns:
        layer:
          key.splay: -15
        space:
          key.splay: -15
          key.shift: [2.5, 3]
          key.width: 1.5kx
          key.rotate: -90
      rows:
        cluster:
outlines:
  outline: # idk tbh
    - what: rectangle
      where: true
      size: [px, py]
  keys: # key overlaps
    - what: rectangle
      where: true
      size: [kx-0.1, ky-0.1]
  board: # PCB Board outline
    - what: polygon
      operation: stack
      points:
        - ref: main_outer_num
          shift: [-0.5px, 0.5py]
        - ref: main_middle_num
          shift: [-0.5px, 0.6py]
        - ref: main_inner_num
          shift: [1.5px, 0.625py]
        - ref: main_inner_bottom
          shift: [1.5px, -0.25py]
        - ref: thumbs_space_cluster
          shift: [-0.5px, 0.5py]
        - ref: thumbs_space_cluster
          shift: [0.5px, 0.5py]
        - ref: main_index_mod
          shift: [0, -0.5py]
        - ref: main_ring_mod
          shift: [-0.5px, -0.5py]
        - ref: main_outer_bottom
          shift: [-0.5px, -0.5py]
  combo:
    - name: board
    - operation: subtract
      name: keys
pcbs:
  main_pcb:
    outlines:
      main:
        outline:
          board
    footprints:
      choc_hotswap:
        what: choc
        where: true
        params:
          keycaps: true
          reverse: false
          hotswap: true
          from: "{{column_net}}"
          to: "{{col_row}}"
      diode:
        what: diode
        where: true
        params:
          from: "{{col_row}}"
          to: "{{column_net}}"
        adjust:
          shift: [0, -5]
      promicro:
        what: promicro
        where:
          ref: main_inner_num
          shift: [1kx+1, -8]
          rotate: -90
      oled:
        what: oled
        params:
          SDA: P2
          SCL: P3
        where:
          ref: main_inner_num
          shift: [1kx+1, -8] # where does this go
          rotate: -90
      reset:
        what: button
        params:
          from: GND
          to: RST
        where:
          ref: main_inner_num
          shift: [1kx + 1, -35]
          rotate: -90
